performance.mark("js-parse-end:notifications-global-9a4dace972bd.js");
"use strict";(globalThis.webpackChunk_github_ui_github_ui=globalThis.webpackChunk_github_ui_github_ui||[]).push([[41155],{585:(t,e,i)=>{i.d(e,{Cy:()=>l,K3:()=>d,Z8:()=>r,k_:()=>a,lK:()=>c,m$:()=>n});var o=i(66474);function s(t,e,i){return t.dispatchEvent(new CustomEvent(e,{bubbles:!0,cancelable:i}))}function a(t,e){e&&(function(t,e){if(!(t instanceof HTMLFormElement))throw TypeError("The specified element is not of type HTMLFormElement.");if(!(e instanceof HTMLElement))throw TypeError("The specified element is not of type HTMLElement.");if("submit"!==e.type)throw TypeError("The specified element is not a submit button.");if(!t||t!==e.form)throw Error("The specified element is not owned by the form element.")}(t,e),(0,o.A)(e)),s(t,"submit",!0)&&t.submit()}function n(t,e){if("boolean"==typeof e)if(t instanceof HTMLInputElement)t.checked=e;else throw TypeError("only checkboxes can be set to boolean value");else if("checkbox"===t.type)throw TypeError("checkbox can't be set to string value");else t.value=e;s(t,"change",!1)}function l(t,e){for(let i in e){let o=e[i],s=t.elements.namedItem(i);s instanceof HTMLInputElement?s.value=o:s instanceof HTMLTextAreaElement&&(s.value=o)}}function r(t){if(!(t instanceof HTMLElement))return!1;let e=t.nodeName.toLowerCase(),i=(t.getAttribute("type")||"").toLowerCase();return"select"===e||"textarea"===e||"input"===e&&"submit"!==i&&"reset"!==i||t.isContentEditable}function u(t){return new URLSearchParams(t)}function d(t,e){let i=new URLSearchParams(t.search);for(let[t,o]of u(e))i.append(t,o);return i.toString()}function c(t){return u(new FormData(t)).toString()}},14859:(t,e,i)=>{i.d(e,{$r:()=>n,M1:()=>l,li:()=>s,pS:()=>u,wE:()=>r});var o=i(25166);let s="X-Fetch-Nonce",a=new Set;function n(t){a.add(t)}function l(){return a.values().next().value||""}function r(t){let e={};return void 0!==t&&(e["X-Fetch-Nonce-To-Validate"]=t),void 0===t?e[s]=l():a.has(t)?e[s]=t:e[s]=Array.from(a).join(","),e}function u(){let t=o.XC?.head?.querySelector('meta[name="fetch-nonce"]')?.content||"";t&&n(t)}},20947:(t,e,i)=>{i.d(e,{a:()=>a,n:()=>s});var o=i(97797);function s(){let t=document.getElementById("ajax-error-message");t&&(t.hidden=!1)}function a(){let t=document.getElementById("ajax-error-message");t&&(t.hidden=!0)}(0,o.on)("deprecatedAjaxError","[data-remote]",function(t){let{error:e,text:i}=t.detail;t.currentTarget!==t.target||"abort"!==e&&"canceled"!==e&&(/<html/.test(i)?(s(),t.stopImmediatePropagation()):setTimeout(function(){t.defaultPrevented||s()},0))}),(0,o.on)("deprecatedAjaxSend","[data-remote]",function(){a()}),(0,o.on)("click",".js-ajax-error-dismiss",function(){a()})},25166:(t,e,i)=>{i.d(e,{Kn:()=>n,XC:()=>s,cg:()=>a,fV:()=>l});let o="u">typeof FORCE_SERVER_ENV&&FORCE_SERVER_ENV,s="u"<typeof document||o?void 0:document,a="u"<typeof window||o?void 0:window,n="u"<typeof history||o?void 0:history,l="u"<typeof location||o?{get pathname(){return(void 0)??""},get origin(){return(void 0)??""},get search(){return(void 0)??""},get hash(){return(void 0)??""},get href(){return(void 0)??""}}:location},52073:(t,e,i)=>{i.d(e,{O:()=>n,S:()=>a});var o=i(25166);let s=o.cg?.document?.head?.querySelector('meta[name="release"]')?.content||"",a="X-GitHub-Client-Version";function n(){return s}},65323:(t,e,i)=>{i.d(e,{jC:()=>l,kt:()=>a,tV:()=>n});var o=i(52073),s=i(14859);function a(t){let e={"X-Requested-With":"XMLHttpRequest",...(0,s.wE)(t)};return{...e,[o.S]:(0,o.O)()}}function n(t,e){for(let[i,o]of Object.entries(a(e)))t.set(i,o)}function l(t){return{"X-GitHub-App-Type":t}}},66474:(t,e,i)=>{function o(t){let e=t.closest("form");if(!(e instanceof HTMLFormElement))return;let i=s(e);if(t.name){let o=t.matches("input[type=submit]")?"Submit":"",s=t.value||o;i||((i=document.createElement("input")).type="hidden",i.classList.add("js-submit-button-value"),e.prepend(i)),i.name=t.name,i.value=s}else i&&i.remove()}function s(t){let e=t.querySelector("input.js-submit-button-value");return e instanceof HTMLInputElement?e:null}i.d(e,{A:()=>o,C:()=>s})},81669:(t,e,i)=>{var o=i(50467),s=i(31635),a=i(39595),n=i(20947),l=i(585),r=i(65323);let u=class NotificationsListSubscriptionFormElement extends HTMLElement{async submitCustomForm(t){await this.submitForm(t),this.closeMenu()}async submitForm(t){t.preventDefault(),(0,n.a)();let e=t.currentTarget,i=new FormData(e),o=await self.fetch(e.action,{method:e.method,body:i,headers:{...(0,r.kt)(),Accept:"application/json"}});if(!o.ok)return void(0,n.n)();let s=await o.json(),a=i.get("do");"string"==typeof a&&this.updateCheckedState(a),"string"==typeof a&&this.updateMenuButtonCopy(a),this.updateSocialCount(s.count),this.applyInputsCheckedPropertiesToAttributesForNextFormReset(),this.closeMenu()}updateMenuButtonCopy(t){this.unwatchButtonCopy.hidden="subscribed"!==t&&"custom"!==t,this.stopIgnoringButtonCopy.hidden="ignore"!==t,this.watchButtonCopy.hidden="subscribed"===t||"custom"===t||"ignore"===t}applyInputsCheckedPropertiesToAttributesForNextFormReset(){for(let t of[...this.threadTypeCheckboxes])t.toggleAttribute("checked",t.checked)}updateCheckedState(t){for(let e of this.subscriptionButtons)e.setAttribute("aria-checked",e.value===t?"true":"false");if("custom"===t)this.customButton.setAttribute("aria-checked","true");else{for(let t of(this.customButton.setAttribute("aria-checked","false"),[...this.threadTypeCheckboxes]))(0,l.m$)(t,!1);if(void 0!==this.subscriptionsContainer){for(let t=0;t<this.subscriptionsLabels.length;t++)this.subscriptionsLabels[t].remove();void 0!==this.subscriptionsSubtitle&&this.subscriptionsSubtitle.toggleAttribute("hidden",!1),this.subscriptionsContainer.textContent=""}}}updateSocialCount(t){this.socialCount&&(this.socialCount.textContent=t,this.socialCount.setAttribute("aria-label",`${this.pluralizeUsers(t)} watching this repository`))}pluralizeUsers(t){return 1===parseInt(t)?"1 user is":`${t} users are`}handleDialogLabelToggle(t){let e=t.detail.wasChecked,i=t.detail.toggledLabelId,o=t.detail.templateLabelElementClone;if(e){for(let t=0;t<this.subscriptionsLabels.length;t++)if(this.subscriptionsLabels[t].getAttribute("data-label-id")===i){this.subscriptionsLabels[t].remove();break}}else o.removeAttribute("hidden"),o.setAttribute("data-targets","notifications-list-subscription-form.subscriptionsLabels"),this.subscriptionsContainer.appendChild(o)}openCustomDialog(t){t.preventDefault(),t.stopPropagation(),this.menu.toggleAttribute("hidden",!0),this.enableApplyButtonAndCheckbox(),this.saveCurrentLabelsState(),this.customDialog.toggleAttribute("hidden",!1),setTimeout(()=>{this.customDialog.querySelector("input[type=checkbox][autofocus]")?.focus()},0)}enableApplyButtonAndCheckbox(){this.customDialog.querySelectorAll('[data-type="label"]:not([hidden])').length>0&&(this.customSubmit.removeAttribute("disabled"),this.threadTypeCheckboxes[0].checked=!0)}closeCustomDialog(t){t.preventDefault(),t.stopPropagation(),this.menu.toggleAttribute("hidden",!1),this.customDialog.toggleAttribute("hidden",!0),setTimeout(()=>{this.customButton.focus()},0)}resetFilterLabelsDialog(t){t.preventDefault(),t.stopPropagation();for(let t=0;t<this.subscriptionsLabels.length;t++){let e=this.subscriptionsLabels[t].getAttribute("data-label-id");for(let t=0;t<this.dialogLabelItems.length;t++)if(this.dialogLabelItems[t].labelId===e){this.dialogLabelItems[t].setCheckedForDropdownLabel(!1);break}}for(let t=0;t<Object.keys(this.lastAppliedLabels).length;t++){let e=Object.keys(this.lastAppliedLabels)[t];for(let t=0;t<this.dialogLabelItems.length;t++)if(this.dialogLabelItems[t].labelId===e){this.dialogLabelItems[t].setCheckedForDropdownLabel(!0);break}}this.subscriptionsContainer.replaceChildren(...Object.values(this.lastAppliedLabels)),this.closeFilterLabelsDialog(t)}openFilterLabelsDialog(t){t.preventDefault(),t.stopPropagation(),this.saveCurrentLabelsState(),this.customDialog.toggleAttribute("hidden",!0),this.filterLabelsDialog.toggleAttribute("hidden",!1),setTimeout(()=>{this.filterLabelsDialog.querySelector("input[type=checkbox][autofocus]")?.focus()},0)}closeFilterLabelsDialog(t){t.preventDefault(),t.stopPropagation(),this.menu.toggleAttribute("hidden",!0),this.customDialog.toggleAttribute("hidden",!1),this.filterLabelsDialog.toggleAttribute("hidden",!0)}applyFilterLabelsDialog(t){t.preventDefault(),t.stopPropagation(),this.saveCurrentLabelsState(),this.hideFilterSubtitle(),this.enableIssuesCheckbox(),this.closeFilterLabelsDialog(t)}enableIssuesCheckbox(){let t=Object.keys(this.lastAppliedLabels).length>0;t&&this.threadTypeCheckboxes.length>0&&(this.threadTypeCheckboxes[0].checked=t),this.threadTypeCheckboxesUpdated()}hideFilterSubtitle(){let t=Object.keys(this.lastAppliedLabels).length>0;this.subscriptionsSubtitle.toggleAttribute("hidden",t)}saveCurrentLabelsState(){this.lastAppliedLabels={},this.labelInputs.textContent="";for(let t=0;t<this.subscriptionsLabels.length;t++){let e=this.subscriptionsLabels[t].getAttribute("data-label-id");e&&(this.lastAppliedLabels[e]=this.subscriptionsLabels[t].cloneNode(!0),this.appendLabelToFormInput(e))}}appendLabelToFormInput(t){let e=document.createElement("input");e.setAttribute("type","hidden"),e.setAttribute("name","labels[]"),e.setAttribute("value",t),this.labelInputs.appendChild(e)}detailsToggled(){this.menu.toggleAttribute("hidden",!1),this.customDialog.toggleAttribute("hidden",!0)}submitCustom(t){t.preventDefault(),this.details.toggleAttribute("open",!1)}threadTypeCheckboxesUpdated(){let t=!this.threadTypeCheckboxes.some(t=>t.checked);this.customSubmit.disabled=t}closeMenu(){this.details.toggleAttribute("open",!1)}constructor(...t){super(...t),(0,o._)(this,"lastAppliedLabels",{})}};(0,s.Cg)([a.aC],u.prototype,"details",void 0),(0,s.Cg)([a.aC],u.prototype,"menu",void 0),(0,s.Cg)([a.aC],u.prototype,"customButton",void 0),(0,s.Cg)([a.aC],u.prototype,"customDialog",void 0),(0,s.Cg)([a.aC],u.prototype,"filterLabelsDialog",void 0),(0,s.Cg)([a.zV],u.prototype,"subscriptionButtons",void 0),(0,s.Cg)([a.zV],u.prototype,"subscriptionsLabels",void 0),(0,s.Cg)([a.aC],u.prototype,"labelInputs",void 0),(0,s.Cg)([a.aC],u.prototype,"subscriptionsSubtitle",void 0),(0,s.Cg)([a.aC],u.prototype,"socialCount",void 0),(0,s.Cg)([a.aC],u.prototype,"unwatchButtonCopy",void 0),(0,s.Cg)([a.aC],u.prototype,"stopIgnoringButtonCopy",void 0),(0,s.Cg)([a.aC],u.prototype,"watchButtonCopy",void 0),(0,s.Cg)([a.zV],u.prototype,"threadTypeCheckboxes",void 0),(0,s.Cg)([a.aC],u.prototype,"customSubmit",void 0),(0,s.Cg)([a.aC],u.prototype,"subscriptionsContainer",void 0),(0,s.Cg)([a.zV],u.prototype,"dialogLabelItems",void 0),u=(0,s.Cg)([a.p_],u);let d=class NotificationsTeamSubscriptionFormElement extends HTMLElement{closeMenu(){this.details.toggleAttribute("open",!1)}};(0,s.Cg)([a.aC],d.prototype,"details",void 0),d=(0,s.Cg)([a.p_],d);let NotificationsDialogLabelItemElement=class NotificationsDialogLabelItemElement extends HTMLElement{toggleDropdownLabel(t){if(t.preventDefault(),t.stopPropagation(),this.label){let t="true"===this.label.getAttribute("aria-checked");this.setCheckedForDropdownLabel(!t),this.dispatchEvent(new CustomEvent("notifications-dialog-label-toggled",{detail:{wasChecked:t,toggledLabelId:this.labelId,templateLabelElementClone:this.hiddenLabelTemplate.cloneNode(!0)},bubbles:!0}))}}setCheckedForDropdownLabel(t){this.label.setAttribute("aria-checked",t.toString())}};(0,o._)(NotificationsDialogLabelItemElement,"attrPrefix",""),(0,s.Cg)([a.aC],NotificationsDialogLabelItemElement.prototype,"label",void 0),(0,s.Cg)([a.aC],NotificationsDialogLabelItemElement.prototype,"hiddenLabelTemplate",void 0),(0,s.Cg)([a.aC],NotificationsDialogLabelItemElement.prototype,"hiddenCheckboxInput",void 0),(0,s.Cg)([a.CF],NotificationsDialogLabelItemElement.prototype,"labelId",void 0),NotificationsDialogLabelItemElement=(0,s.Cg)([a.p_],NotificationsDialogLabelItemElement)}},t=>{t.O(0,[60292],()=>t(t.s=81669)),t.O()}]);
//# sourceMappingURL=notifications-global-e0a75d1ebd06.js.map